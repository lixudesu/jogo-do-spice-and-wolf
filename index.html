<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Linha do Tempo do Dinheiro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Roboto:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-image: url('imagens/fundo_trigo.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #f0c080;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .game-ui-top {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 50;
        }

        .hearts-container {
            display: flex;
            gap: 5px;
        }

        .heart {
            font-size: 3em;
            color: #ff0000;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .heart.lost {
            transform: scale(0.8);
            opacity: 0.3;
        }

        .hard-mode-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .hard-mode-toggle span {
            font-family: 'Fredoka One', cursive;
            font-size: 1.2em;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input { display: none; }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #E87A00;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 30px 40px;
            border-radius: 25px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            width: 95%;
            max-width: 1100px;
            text-align: center;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        h1 {
            font-family: 'Fredoka One', cursive;
            color: #8B4513;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .timeline {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            position: relative;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 8px;
            background-color: #d0d0d0;
            border-radius: 4px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
        }

        .slot {
            width: 100px;
            height: 100px;
            background-color: #e9ecef;
            border: 3px dashed #ccc;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            color: #adb5bd;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        .slot.filled {
            background-color: #28a745;
            border: 3px solid #208338;
            transform: scale(1.1);
        }

        .items-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .item-card {
            width: 120px;
            padding: 10px;
            cursor: pointer;
            border-radius: 15px;
            background-color: #fff;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .item-card img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .item-card p {
            margin: 0;
            font-weight: bold;
            color: #333;
            transition: opacity 0.3s ease;
        }
        
        .items-container.hard-mode .item-card p {
            opacity: 0;
        }

        .item-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 15px rgba(139, 69, 19, 0.2);
        }
        
        .item-card.used {
            opacity: 0.4;
            cursor: not-allowed;
            transform: scale(0.95);
        }
        
        .character-area {
            position: fixed;
            bottom: -90px;
            left: 0px;
            display: flex;
            align-items: flex-end;
            z-index: 100;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .character-area img, .dialogue-bubble {
            pointer-events: auto;
        }
        
        .character-area img {
            height: 600px;
            animation: float 4s ease-in-out infinite;
            transition: transform 0.3s ease;
        }
        
        .character-area img.clickable {
            cursor: pointer;
            filter: drop-shadow(0 0 15px #ffeb3b);
        }

        .dialogue-bubble {
            background-color: #E87A00;
            color: white;
            padding: 15px 20px;
            border-radius: 20px;
            position: absolute;
            bottom: 590px;
            left: 180px;
            width: 300px;
            max-width: none;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            font-size: 1.1em;
            transform-origin: bottom center;
        }
        
        .dialogue-bubble.correct {
            background-color: #28a745;
            animation: pop 0.3s ease;
        }
        
        .dialogue-bubble.wrong {
            background-color: #dc3545;
            animation: shake 0.5s ease;
        }
        
        .flying-ghost {
            position: fixed;
            z-index: 1000;
            width: 80px;
            height: 80px;
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            transition: transform 0.8s cubic-bezier(0.5, 0, 0.75, 0), opacity 0.5s ease;
        }

        .success-screen, .game-over-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            z-index: 200; 
            position: relative;
        }

        .success-screen h2, .game-over-screen h2 {
            font-family: 'Fredoka One', cursive;
            font-size: 3em;
            color: #8B4513;
        }
        
        .game-over-screen h2 {
            color: #dc3545;
        }

        /* --- MUDANÇA AQUI --- */
        /* Agora os dois botões compartilham o mesmo estilo */
        #play-again-btn, #play-again-btn-2 {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5em;
            padding: 15px 30px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            background-color: #E87A00;
            color: white;
            margin-top: 20px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            transition: all 0.2s ease;
        }
        /* --- E O EFEITO HOVER TAMBÉM --- */
        #play-again-btn:hover, #play-again-btn-2:hover {
            transform: scale(1.05);
            background-color: #d16c00;
        }
        /* --- FIM DA MUDANÇA --- */

        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0px); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        @keyframes pop { 0% { transform: scale(0.8); } 80% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div class="game-ui-top">
        <div class="hearts-container" id="hearts-container">
            <div class="heart" id="heart-1">❤️</div>
            <div class="heart" id="heart-2">❤️</div>
            <div class="heart" id="heart-3">❤️</div>
        </div>
        <div class="hard-mode-toggle">
            <span>Modo Difícil</span>
            <label class="toggle-switch">
                <input type="checkbox" id="hard-mode-checkbox">
                <span class="slider"></span>
            </label>
        </div>
    </div>

    <div class="game-container" id="game-container">
        <h1>A Linha do Tempo do Dinheiro</h1>
        <div class="timeline">
            <div class="slot" id="slot-0">?</div>
            <div class="slot" id="slot-1">?</div>
            <div class="slot" id="slot-2">?</div>
            <div class="slot" id="slot-3">?</div>
            <div class="slot" id="slot-4">?</div>
            <div class="slot" id="slot-5">?</div>
        </div>
        <div class="items-container"></div>
    </div>

    <div class="success-screen" id="success-screen">
        <h2>Parabéns!</h2>
        <p style="font-size: 1.2em; color: #333;">Você completou a jornada do dinheiro!</p>
        <button id="play-again-btn">Jogar Novamente</button>
    </div>
    
    <div class="game-over-screen" id="game-over-screen">
        <h2>Fim de Jogo!</h2>
        <p style="font-size: 1.2em; color: #333;">Parece que ficamos sem vidas. Tente de novo!</p>
        <button id="play-again-btn-2">Tentar Novamente</button>
    </div>

    <div class="character-area" id="character-area">
        <img id="character-img" src="imagens/personagem_normal.png" alt="Personagem Guia">
        <div class="dialogue-bubble" id="dialogue">Olá! Sou a Holo. Vamos organizar a história do dinheiro? Clique no que veio primeiro!</div>
    </div>
    
    <audio id="sound-correct" src="audio/som_acerto.mp3"></audio>
    <audio id="sound-wrong"src="audio/som_erro.mp3"></audio>
    <audio id="sound-victory" src="audio/som_vitoria.mp3"></audio>
    <audio id="sound-gameover" src="audio/som_game_over.mp3"></audio>

    <script>
        const itemsData = [
            { id: 'TROCA (ESCAMBO)', img: 'imagens/item_escambo.jpg', fact: 'Isso! No escambo, era complicado concordar se as trocas eram justas. Clique em mim para continuar!' },
            { id: 'TROCA-MERCADORIA', img: 'imagens/item_sal.jpg', fact: 'Exato! A palavra "salário" vem do sal. Era uma mercadoria que todos aceitavam. Clique em mim para continuar!' },
            { id: 'MOEDAS', img: 'imagens/item_moedas.jpg', fact: 'Perfeito! As moedas de metal eram ótimas porque não estragavam e eram fáceis de contar. Clique em mim para continuar!' },
            { id: 'PAPEL-MOEDA', img: 'imagens/item_papel_antigo.jpg', fact: 'Isso mesmo! O papel era um "vale" pelo ouro guardado no banco. Muito mais leve! Clique em mim para continuar!' },
            { id: 'DINHEIRO', img: 'imagens/item_papel.jpg', fact: 'Correto! Esse é o dinheiro como conhecemos, que tem valor garantido pelo governo, não por ouro. Clique em mim para continuar!' },
            { id: 'DINHEIRO-DIGITAL', img: 'imagens/item_pix.png', fact: 'Incrível! Hoje o dinheiro é digital e nem precisamos tocar nele para fazer compras. Clique em mim para continuar!' }
        ];

        const characterImages = { normal: 'imagens/personagem_normal.png', correct: 'imagens/personagem_acerto.png', wrong: 'imagens/personagem_erro.png' };
        const correctOrder = itemsData.map(item => item.id);
        
        let currentStep = 0;
        let isChecking = false;
        let isWaitingForClick = false;
        let vidas = 3;
        
        const gameContainer = document.getElementById('game-container');
        const successScreen = document.getElementById('success-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const itemsContainer = document.querySelector('.items-container');
        const dialogueBox = document.getElementById('dialogue');
        const characterImg = document.getElementById('character-img');
        const characterArea = document.getElementById('character-area');
        const playAgainBtn = document.getElementById('play-again-btn');
        const playAgainBtn2 = document.getElementById('play-again-btn-2');
        const heartsContainer = document.getElementById('hearts-container');
        const hardModeCheckbox = document.getElementById('hard-mode-checkbox');
        
        const soundCorrect = document.getElementById('sound-correct');
        const soundWrong = document.getElementById('sound-wrong');
        const soundVictory = document.getElementById('sound-victory');
        const soundGameOver = document.getElementById('sound-gameover');

        function setupGame() {
            const shuffledItems = [...itemsData].sort(() => Math.random() - 0.5);
            shuffledItems.forEach(item => {
                const card = document.createElement('div'); card.classList.add('item-card');
                card.onclick = () => checkAnswer(item.id, card, item.img);
                const image = document.createElement('img'); image.src = item.img; image.alt = item.id;
                const label = document.createElement('p'); label.textContent = item.id;
                card.appendChild(image); card.appendChild(label); itemsContainer.appendChild(card);
            });
        }

        function checkAnswer(selectedItemId, cardElement, itemImgSrc) {
            if (cardElement.classList.contains('used') || isChecking) return;
            isChecking = true;

            if (selectedItemId === correctOrder[currentStep]) {
                soundCorrect.play();
                const slot = document.getElementById(`slot-${currentStep}`);
                const itemData = itemsData.find(item => item.id === selectedItemId);
                
                flyToSlot(cardElement, slot, itemImgSrc, () => {
                    slot.classList.add('filled');
                    cardElement.classList.add('used');
                    currentStep++;
                    setCharacterState('correct');
                    updateDialogue(itemData.fact, "correct");

                    if (currentStep === correctOrder.length) {
                        setTimeout(endGame, 2000);
                    } else {
                        isWaitingForClick = true;
                        characterImg.classList.add('clickable');
                    }
                });

            } else {
                soundWrong.play();
                setCharacterState('wrong');
                updateDialogue("Hmm, acho que não foi esse. Tente de novo.", "wrong");
                
                vidas--;
                document.getElementById(`heart-${vidas + 1}`).classList.add('lost');
                
                if (vidas <= 0) {
                    setTimeout(gameOver, 1500);
                } else {
                    setTimeout(() => {
                        setCharacterState('normal');
                        updateDialogue("Vamos, tente de novo!", "normal");
                        isChecking = false;
                    }, 2000);
                }
            }
        }
        
        function flyToSlot(card, slot, imgUrl, onAnimationEnd) {
            const cardRect = card.getBoundingClientRect();
            const slotRect = slot.getBoundingClientRect();

            const ghost = document.createElement('div');
            ghost.classList.add('flying-ghost');
            ghost.style.backgroundImage = `url(${imgUrl})`;
            
            ghost.style.left = `${cardRect.left + (cardRect.width / 2) - 40}px`;
            ghost.style.top = `${cardRect.top + (cardRect.height / 2) - 40}px`;
            
            document.body.appendChild(ghost);

            ghost.getBoundingClientRect(); 

            const targetX = slotRect.left + (slotRect.width / 2) - 40;
            const targetY = slotRect.top + (slotRect.height / 2) - 40;
            ghost.style.transform = `translate(${targetX - cardRect.left}px, ${targetY - cardRect.top}px) scale(1.1)`;
            ghost.style.opacity = '0.8';

            ghost.addEventListener('transitionend', () => {
                ghost.remove();
                slot.innerHTML = `<img src="${imgUrl}" alt="">`;
                onAnimationEnd();
            }, { once: true });
        }

        characterImg.onclick = () => {
            if (isWaitingForClick) {
                isWaitingForClick = false;
                characterImg.classList.remove('clickable');
                setCharacterState('normal');
                updateDialogue("Qual será o próximo?", "normal");
                isChecking = false;
            }
        };

        function endGame() {
            soundVictory.play();
            gameContainer.style.opacity = '0';
            characterArea.style.opacity = '0';
            document.querySelector('.game-ui-top').style.opacity = '0';
            
            setTimeout(() => {
                gameContainer.style.display = 'none';
                successScreen.style.display = 'flex';
            }, 500);
        }
        
        function gameOver() {
            soundGameOver.play();
            gameContainer.style.opacity = '0';
            characterArea.style.opacity = '0';
            document.querySelector('.game-ui-top').style.opacity = '0';
            
            setTimeout(() => {
                gameContainer.style.display = 'none';
                gameOverScreen.style.display = 'flex';
            }, 500);
        }
        
        function updateDialogue(text, feedbackType) {
            dialogueBox.textContent = text;
            dialogueBox.className = 'dialogue-bubble';
            if (feedbackType) { dialogueBox.classList.add(feedbackType); }
        }
        
        function setCharacterState(state) {
            characterImg.src = characterImages[state];
        }

        playAgainBtn.onclick = () => { location.reload(); };
        playAgainBtn2.onclick = () => { location.reload(); };
        
        hardModeCheckbox.onchange = (e) => {
            if (e.target.checked) {
                itemsContainer.classList.add('hard-mode');
            } else {
                itemsContainer.classList.remove('hard-mode');
            }
        };

        document.addEventListener('DOMContentLoaded', setupGame);
    </script>
</body>
</html>